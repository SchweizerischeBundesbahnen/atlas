<div class="white-table-container-no-tabs">
  <app-timetable-hearing-overview-tab-heading
    [cantonShort]="cantonShort"
    [foundTimetableHearingYear]="foundTimetableHearingYear"
    [hearingStatus]="hearingStatus"
    [noActiveTimetableHearingYearFound]="noTimetableHearingYearFound"
  ></app-timetable-hearing-overview-tab-heading>
  <div *ngIf="!noTimetableHearingYearFound">
    <div class="d-flex flex-row col-12">
      <div *ngIf="!isHearingYearActive" class="d-flex flex-column col-2 pe-3 pb-1">
        <mat-label class="font-bold-lg subtitle-margin"
          >{{ 'TTH.SELECT_YEAR' | translate }}
        </mat-label>
        <span class="fake-lable-space"></span>
        <div class="multi-select-search">
          <mat-select
            (selectionChange)="changeSelectedYearFromDropdown($event)"
            [(value)]="defaultYearSelection"
            data-cy="canton-type"
            placeholder="{{ 'FORM.DROPDOWN_PLACEHOLDER' | translate }}"
          >
            <mat-option *ngFor="let year of YEAR_DRODOWN_OPTIONS" [value]="year">
              {{ year }}
            </mat-option>
          </mat-select>
        </div>
      </div>
      <div class="d-flex flex-column col-3 pe-3 pb-3 mb-5">
        <mat-label class="font-bold-lg subtitle-margin"
          >{{ 'TTH.SELECT_CANTON' | translate }}
        </mat-label>
        <span class="fake-lable-space"></span>
        <div class="multi-select-search">
          <mat-select
            (selectionChange)="changeSelectedCantonFromDropdown($event)"
            [(value)]="dafaultDropdownCantonSelection"
            data-cy="canton-type"
            placeholder="{{ 'FORM.DROPDOWN_PLACEHOLDER' | translate }}"
          >
            <mat-option *ngFor="let canton of CANTON_DROPDOWN_OPTIONS" [value]="canton">
              <img
                alt="canton-logo"
                class="pe-1"
                height="28"
                src="assets/images/cantons/{{ canton.toUpperCase() }}.svg"
                width="28"
              />
              {{ 'TTH.CANTON.' + canton | translate }}
            </mat-option>
          </mat-select>
        </div>
      </div>
      <div *ngIf="showDownloadCsvButton" class="d-flex flex-column col-3">
        <span class="fake-lable-space"></span>
        <span class="fake-lable-space"></span>
        <atlas-button
          (buttonClicked)="downloadCsv()"
          applicationType="LIDI"
          buttonDataCy="download-csv"
          buttonText="TTH.BUTTON.DOWNLOAD_CSV"
          buttonType="createCheckingPermission"
        >
          <ng-template #rightIcon>
            <download-icon class="ps-2"></download-icon>
          </ng-template>
        </atlas-button>
      </div>
      <div *ngIf="showManageTimetableHearingButton" class="d-flex flex-column col-3 left-position">
        <span class="fake-lable-space"></span>
        <span class="fake-lable-space"></span>
        <atlas-button
          (buttonClicked)="manageTimetableHearing()"
          applicationType="LIDI"
          buttonDataCy="manageTimetableHearing"
          buttonText="TTH.BUTTON.MANAGE_TIMETABLE_HEARING"
          buttonType="createCheckingPermission"
          wrapperStyleClass="text-align-end"
        >
        </atlas-button>
      </div>
      <div *ngIf="showAddNewStatementButton" class="d-flex flex-column col-3 left-position">
        <span class="fake-lable-space"></span>
        <span class="fake-lable-space"></span>
        <atlas-button
          (buttonClicked)="addNewStatement()"
          applicationType="LIDI"
          buttonDataCy="addNewStatement"
          buttonText="TTH.BUTTON.ADD_NEW_STATEMENT"
          buttonType="createCheckingPermission"
          wrapperStyleClass="text-align-end"
        >
        </atlas-button>
      </div>
      <div *ngIf="showStartTimetableHearingButton" class="d-flex flex-column col-3">
        <span class="fake-lable-space"></span>
        <span class="fake-lable-space"></span>
        <atlas-button
          (buttonClicked)="startTimetableHearing()"
          applicationType="LIDI"
          buttonDataCy="startTimetableHearing"
          buttonText="TTH.BUTTON.START_TIMETABLE_HEARING"
          buttonType="createCheckingPermission"
        >
        </atlas-button>
      </div>
      <div *ngIf="showAddNewTimetableHearingButton" class="d-flex flex-column col-3 left-position">
        <span class="fake-lable-space"></span>
        <span class="fake-lable-space"></span>
        <atlas-button
          (buttonClicked)="addNewTimetableHearing()"
          applicationType="LIDI"
          buttonDataCy="addNewTimetableHearing"
          buttonText="TTH.BUTTON.ADD_NEW_TIMETABLE_HEARING"
          buttonType="createCheckingPermission"
          wrapperStyleClass="text-align-end"
        >
        </atlas-button>
      </div>
    </div>
    <div class="d-flex flex-row col-12 mb-3">
      <div class="d-flex flex-column col-6">
        <div>
          <span *ngIf="isHearingYearActive && isSwissCanton" class="font-bold-lg">
            {{
              'TTH.TABLE_RESULT_ACTUAL_HEARING_HEADING_PREFIX'
                | translate : { totalCount: totalCount$ }
            }}
            {{ 'TTH.WHOLE_SWISS' | translate }}
          </span>
          <span *ngIf="isHearingYearActive && !isSwissCanton" class="font-bold-lg">
            {{
              'TTH.TABLE_RESULT_ACTUAL_HEARING_HEADING_PREFIX'
                | translate : { totalCount: totalCount$ }
            }}
            {{ 'TTH.SWISS_CANTON' | translate }}
            {{ 'TTH.CANTON.' + cantonShort.toUpperCase() | translate }}
          </span>
          <span *ngIf="!isHearingYearActive" class="font-bold-lg">{{
            'TTH.TABLE_RESULT_HEADING'
              | translate
                : { totalCount: totalCount$, year: foundTimetableHearingYear.timetableYear }
          }}</span>
        </div>
        <div *ngIf="showHearingDetail">
          <span
            >{{ this.foundTimetableHearingYear.hearingFrom | displayDate }}
            {{ 'COMMON.TO' | translate }}
            {{ this.foundTimetableHearingYear.hearingTo | displayDate }}</span
          >
        </div>
      </div>
      <div *ngIf="isHearingYearActive" class="d-flex flex-column col-3 left-position">
        <div class="multi-select-search">
          <mat-select
            (selectionChange)="collectingActions($event)"
            data-cy="collect-action-type"
            placeholder="{{ 'TTH.DROPDOWN.COLLECTING_ACTION.PLACEHOLDER' | translate }}"
          >
            <mat-option *ngFor="let action of COLLECTING_ACTION_DROWPDOWN_OPTIONS" [value]="action">
              <img
                alt="action"
                height="20"
                src="assets/images/collecting_action/{{ action.toUpperCase() }}.svg"
                width="20"
              />
              <span class="ps-2">
                {{ 'TTH.DROPDOWN.COLLECTING_ACTION.OPTION.' + action | translate }}
              </span>
            </mat-option>
          </mat-select>
        </div>
      </div>
    </div>

    <app-table
      (editElementEvent)="editVersion($event)"
      (getTableElementsEvent)="getOverview($event)"
      [canEdit]="true"
      [isLoading]="isLoading"
      [tableColumns]="tableColumns"
      [tableData]="timeTableHearingStatements"
      [totalCount]="totalCount$"
      data-cy="ttfn"
    ></app-table>
    <router-outlet></router-outlet>
  </div>
</div>
