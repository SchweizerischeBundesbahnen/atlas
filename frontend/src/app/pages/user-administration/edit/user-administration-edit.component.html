<app-dialog-close (clicked)="dialogService.confirmLeave(editMode, dialogRef)"></app-dialog-close>

<h1 class="font-bold-4xl mb-5">{{ getTitle() }}</h1>

<ng-template [ngIf]="user">
  <h2 class="font-bold-xl mb-2">{{ 'USER_ADMIN.INFORMATION' | translate }}</h2>
  <app-read-only-data [config]="readOnlyDataConfig" [data]="user"></app-read-only-data>
  <h1 class="font-bold-4xl mt-5">{{ 'USER_ADMIN.APPLICATIONS' | translate }}</h1>
  <div *ngFor="let permission of userPermissionManager.getPermissions()">
    <app-user-administration-application-config
      [applicationConfigManager]="userPermissionManager"
      [application]="permission.application"
      [readOnly]="!editMode"
    ></app-user-administration-application-config>
  </div>
</ng-template>

<footer class="footer fixed-bottom d-flex align-items-center justify-content-center">
  <ng-container *ngIf="editMode; else readMode">
    <button
      class="atlas-primary-btn footer-btn"
      (click)="dialogService.confirmLeave(true, dialogRef)"
      data-cy="cancel"
    >
      {{ 'COMMON.CANCEL' | translate }}
    </button>
    <button
      class="atlas-primary-btn footer-btn ms-3"
      data-cy="save"
      type="submit"
      (click)="saveEdits()"
    >
      {{ 'COMMON.SAVE' | translate }}
    </button>
  </ng-container>

  <ng-template #readMode>
    <button
      class="atlas-primary-btn footer-btn"
      (click)="dialogService.confirmLeave(false, dialogRef)"
      data-cy="backToOverview"
    >
      {{ 'COMMON.BACK_TO_OVERVIEW' | translate }}
    </button>
    <button
      class="atlas-primary-btn footer-btn ms-3"
      data-cy="edit"
      (click)="editMode = true"
      [disabled]="!user"
    >
      {{ 'COMMON.EDIT' | translate }}
    </button>
  </ng-template>
</footer>
