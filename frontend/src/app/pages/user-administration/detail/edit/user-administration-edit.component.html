<app-dialog-close (clicked)="cancelEdit(editMode)"></app-dialog-close>

<h1 class="font-bold-4xl mb-5">{{ user | editTitle }}</h1>

<ng-template [ngIf]="user">
  <h2 class="font-bold-xl mb-2">{{ 'USER_ADMIN.INFORMATION' | translate }}</h2>
  <app-user-administration-read-only-data [data]="user"></app-user-administration-read-only-data>
  <h1 class="font-bold-4xl mt-5">{{ 'USER_ADMIN.APPLICATIONS' | translate }}</h1>
  <div *ngFor="let permission of userPermissionManager.userPermission.permissions">
    <app-user-administration-application-config
      [application]="permission.application"
      [readOnly]="!editMode"
      [role]="permission.role"
    ></app-user-administration-application-config>
  </div>
</ng-template>
<app-user-detail-info [record]="userRecord"></app-user-detail-info>
<footer class="footer fixed-bottom d-flex align-items-center justify-content-center">
  <ng-container *ngIf="editMode; else readMode">
    <button (click)="cancelEdit()" class="atlas-primary-btn footer-btn" data-cy="cancel">
      {{ 'COMMON.CANCEL' | translate }}
    </button>
    <button
      (click)="saveEdits()"
      [disabled]="!saveEnabled"
      class="atlas-primary-btn footer-btn ms-3"
      data-cy="save"
      type="submit"
    >
      {{ 'COMMON.SAVE' | translate }}
    </button>
  </ng-container>

  <ng-template #readMode>
    <button
      (click)="dialogRef.close()"
      class="atlas-primary-btn footer-btn"
      data-cy="backToOverview"
    >
      {{ 'COMMON.BACK_TO_OVERVIEW' | translate }}
    </button>
    <button
      (click)="editMode = true; saveEnabled = true"
      [disabled]="!user"
      class="atlas-primary-btn footer-btn ms-3"
      data-cy="edit"
    >
      {{ 'COMMON.EDIT' | translate }}
    </button>
  </ng-template>
</footer>
