<div [formGroup]="formGroup" class="atlas-select">
  <mat-label *ngIf="label" class="font-bold-lg" [ngClass]="required ? 'required-indicator' : ''">
    {{ label | translate }}
  </mat-label>
  <atlas-spacer *ngIf="label" height="3px"></atlas-spacer>
  <atlas-spacer *ngIf="additionalLabelspace" height="30px"></atlas-spacer>
  <div class="multi-select-search">
    <mat-select
      (selectionChange)="selectChanged.emit($event)"
      [formControlName]="controlName"
      [attr.data-cy]="dataCy"
      placeholder="{{ 'FORM.DROPDOWN_PLACEHOLDER' | translate }}"
      [multiple]="multiple"
    >
      <mat-option *ngFor="let option of options" [value]="valueExtractor(option)">
        <ng-container
          *ngTemplateOutlet="matOptionPrefix; context: getAsObject(option)"
        ></ng-container>
        <ng-template [ngIf]="optionTranslateLabelPrefix" [ngIfElse]="rawOption">
          {{ optionTranslateLabelPrefix + displayExtractor(option) | translate }}
        </ng-template>
        <ng-template #rawOption>
          {{ displayExtractor(option) }}
        </ng-template>
      </mat-option>
    </mat-select>
  </div>
  <app-atlas-field-error
    *ngIf="formGroup"
    [form]="formGroup"
    [controlName]="controlName!"
  ></app-atlas-field-error>
</div>
